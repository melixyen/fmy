
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="zh-TW" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width; initial-scale=1.0; user-scalable=no" />
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<title>RONG-DEMO dw2</title>
<style type="text/css">
@charset "utf-8";

body {
    /*font-family:'細明體', "PMingLiU";*/
    font-size: 14px;
    margin: 0px;
    height: 10000px;
}

#bgScroll {
	position: fixed;
	left: 0; top: 0;
	width: 100%;
	height: 100%;
	overflow: hidden;
	
}
#movement{
	position: absolute;
	transition: all 500ms ease-out;
}
#pic, #dynamicLine{
	position: absolute;
	left: 0; top: 0;
}
#svg, #dynamicLine path{
	transition: all 200ms ease-out;
}
#dynamicLine path{
	stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit: 4; stroke-opacity: 1;
}

.setItem{
	display: block;
	background-color: rgba(244,244,244,0.8);
	margin: 10px;
}

</style>

<script type="text/javascript">

var pxRate = 0.5;//Adjust image resize rate

TT ={
	picWidth: 9916.99,
	picHeight: 6994.7,
	bgWidth: pxRate * 9916.99,
	bgHeight: pxRate *6994.7,
	scrollRate: 1,
	moveTable: [
		[0, 2779, 2266], [1, 3153, 2266], [2,3516,2214], [4, 3960, 2577], [5,3967,2511], [6,3974,3399], [7,3990,3610], 
		[8, 4300, 3773], [9,4658,3773], [10,4958,3773], [11,5273,3773], [12,5648,3773], [13, 5957, 3773], 
		[14,6374,3798], [15,6638,4062], [16,6680,4305], [17,6551,4584], 
		[18, 6245, 4758], [19,5894,4758], [20,5570,4758], [21,5207,4758], [22,4895,4758], [23,4511,4758], [24,4166,4758], [25,3863,4758], [26,3512,4758],
		[27,3194,4404], [29,2843,4200], [30,2474,4200], [31,2075,4200], [32,1769,4200], [33,1484,4200], [34,1070,4200], [35,830,4371],
		[36,812,4700], [37,812,5061], [38,812,5420], [39,812,5757], 
		[40,986,5922], [41,1460,5922], [42,1770,5922], [43,2088,5922], [44,2462,5922], [45,2799,5922], [46,3198,5922], [47,3525,5922], [48,4000,5922], [49,4311,5922], [50,4533,5922],
		[52,5211,5922], [54,6014,5922], [55,6365,5922], [56,6605,5922], [57,7000,5922], [58,7259,5922], [60,8036,5922],
		[61,8282,5862], [62,8530,5790], [63,8530,5229], [64,8530,4959], [65,8530,4689], [67,8530,3834], [68,8530,3570],
		[69,8430,3258], [70,8220,2991], [71,7914,2841],
		[72,7605,2805], [73,7290,2805], [74,6858,2805], [75,6500,2805], [76,6162,2805], [77,5961,2805], 
		[79,5635,2445], [80,5339,2115], [82,5335,1257],
		[84,4933,900], [85,4600,900], [86,4257,900], [88,3522,980], [90,2879,980], [92,2121,980], 
		[93,1857,1059], [94,1602,1308], [96,1638,2016], [97,1812,2175], [98,2238,2266], [99,2544,2266],
		
		[100, 2779, 2266]
	]
}

function getRealPX(x,y){
	if(typeof(x)=='object' && x.length && x.map){
		y = x[1];
		x = x[0];
	}
	return [x*pxRate, y*pxRate];
}
function moveScreen(){
	var scTop = document.documentElement.scrollTop || document.body.scrollTop,
		scHeight = (document.documentElement.scrollHeight || document.body.scrollHeight) - window.innerHeight;
	
	var per = (scTop / scHeight) * 100;
	//console.log(per);
	var ary = TT.moveTable[0];
	if(per>0){
		for(var i=0; i<TT.moveTable.length; i++){
			if(per < TT.moveTable[i][0]) break;
			ary = TT.moveTable[i]
		}
	}
	var xy = getRealPX(ary[1], ary[2]);
	var viewWidth = window.innerWidth,
		viewHeight = window.innerHeight;
	
	var moveX = 0 - (xy[0] - (viewWidth / 2)),
		moveY = 0 - (xy[1] - (viewHeight / 2));
	var movement = document.getElementById('movement');
	movement.style.left = moveX + 'px';
	movement.style.top = moveY + 'px';
}
function changeSet(){
	var vColor = document.getElementById('vColor').value;
	var line1 = document.getElementById('line1');
	line1.style.stroke = vColor;
	line1.style.strokeWidth = document.getElementById('vNumber').value;
	TT.scrollRate = document.getElementById('vSpeed').value;
	initFn();
}

function initFn(){

	var pic = document.getElementById('pic');
	pic.style.width = TT.bgWidth + 'px';
	pic.style.height = TT.bgHeight + 'px';
	
	var dynamicLine = document.getElementById('dynamicLine');
	dynamicLine.style.width = TT.bgWidth + 'px';
	dynamicLine.style.height = TT.bgHeight + 'px';

	var line1 = document.getElementById('line1');
	var svgLineLength = line1.getTotalLength();
	line1.style.strokeDasharray = svgLineLength;
	line1.style.strokeDashoffset = svgLineLength;
	document.body.style.height = svgLineLength * TT.scrollRate/4+ 'px';
	
	
	document.documentElement.scrollTop = 0;
	window.addEventListener('scroll', function(e){
		//Draw Line
		var scTop = document.documentElement.scrollTop || document.body.scrollTop,
			scHeight = (document.documentElement.scrollHeight || document.body.scrollHeight) - window.innerHeight;
		var per = (scTop / scHeight) * 1;
		var lineDashOffset = svgLineLength * (1-per);
		line1.style.strokeDashoffset = lineDashOffset;
		
		//Move Screen
		moveScreen();
	});
	moveScreen();
}

</script>
<!--<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>-->
<!-- -->
<!-- -->
</head>
<body onload="initFn()">
	<div id="bgScroll">
		<div id="movement">
			<img src="dw2.svg" id="pic">
			<svg id="dynamicLine" version="1.1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink" viewBox="0 0 9916.99 6994.7">
				<path id="line1" style="fill:none;stroke:#b0e3ff;stroke-linecap:round;stroke-linejoin:round;stroke-width:6px;  stroke-dasharray: 0; stroke-dashoffset:0"
					d="M2790.57,2271.27h888.71c153.18,0,277.36,124.18,277.36,277.36v942.52c0,153.18,124.18,277.36,277.36,277.36H6184.08c273.4,0,495,221.64,495,495s-221.64,495-495,495H3481c-153.18,0-277.35-124.17-277.35-277.35s-124.18-277.36-277.36-277.36H1089.46c-153.18,0-277.35,124.17-277.35,277.36V5645.9c0,153.18,124.17,277.36,277.35,277.36H8046.28c268,0,485.27-217.26,485.27-485.27h.14V3656.09c0-471.16-381.94-853.1-853.1-853.1l-1719.35-.51h20c-357,0-646.39-289.4-646.39-646.39v-900c0-153.18-124.18-277.36-277.36-277.36l-2896.29-.51v.25c-357,0-646.39,289.4-646.39,646.39s289.4,646.39,646.39,646.39H2789">
				</path>
			</svg>
		</div>
	</div>
	<!--<div id="set" style="font-size:X-Large; max-width:100%; position:absolute; left:0; top:0;">
		<div class="setItem">顏色:<input type="color" id="vColor" onchange="changeSet()" value="#b0e3ff" /></div>
		<div class="setItem">粗細:<input type="number" id="vNumber" min="1" max="30" onchange="changeSet()" value="6" style="width:40px;" /></div>
		<div class="setItem">速率:<input type="number" id="vSpeed" min="1" max="30" onchange="changeSet()" value="1" style="width:40px;" /></div>
	</div>-->
</body>
</html>
